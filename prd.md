# AutoForge 产品需求文档 (PRD)

> **文档状态**: `活跃开发`
> **版本**: `v0.2-alpha`
> **最后更新**: `2025-06-28`

---

## 1. 项目愿景与目标

### 1.1 项目愿景
**AutoForge** 旨在成为一个领先的、基于大型语言模型的自动化软件工程平台。它的最终目标是实现软件开发生命周期（SDLC）的高度自动化，从最初的需求捕获、技术方案设计，到代码生成、测试、部署和维护，将工程师从重复性工作中解放出来，专注于架构设计和创新。

### 1.2 核心理念
- **智能体驱动**: 以一个或多个协同工作的智能体为核心，驱动整个开发流程。
- **模块化与可扩展性**: 通过标准化的"分析器"（Analyzers）和"工具"（Tools）接口，轻松扩展新功能和集成第三方服务。
- **知识驱动**: 不断从互联网（如HuggingFace, GitHub, ArXiv）学习最新的技术、模型和代码实践，保证技术选型和方案设计的前沿性。

### 1.3 初期目标 (v0.1 - v0.5)
在项目初期，我们将专注于**机器学习/深度学习工程的自动化**，特别是模型选型和评估这一关键环节，以此作为切入点，验证核心架构和理念。

---

## 2. 核心用例与目标用户

- **目标用户**:
    - **机器学习工程师**: 需要为特定任务（如文本分类、图像识别）快速找到并评估最合适的模型。
    - **算法研究员**: 需要快速跟踪特定领域的最新研究论文，并评估其相关代码的可行性。
    - **AI产品经理/技术负责人**: 需要从业务需求文档出发，快速形成可行的技术方案和资源评估。

- **核心用例**:
    1.  **自动化模型选型**: 用户提供一份包含业务需求和数据描述的文档，系统自动输出一份详细的模型选型报告，包含推荐模型、性能预估和实验建议。
    2.  **前沿技术追踪与分析**: 用户指定一个研究领域（如"多模态大模型"），系统自动检索最新的顶会论文，分析其核心思想和代码质量，并生成技术洞察报告。
    3.  **代码辅助实现与复现**: 基于一篇论文或一个代码仓库，系统能够辅助工程师理解代码、配置环境、甚至生成单元测试，以加速代码的复现和二次开发。

---

## 3. 功能需求矩阵

这是AutoForge的核心功能模块列表，描述了每个模块的职责、当前状态和未来规划。

| 模块 (Module) | 功能点 (Feature) | 状态 | 核心组件 | 描述 |
| :--- | :--- | :--- | :--- | :--- |
| **项目核心 (Core)** | **智能体编排 (Agent Orchestration)** | `部分实现` | `AutoForgeAgent` | 负责加载和执行一系列分析器，管理上下文和数据流。 |
| | **自定义工作流** | `部分实现` | `AutoForgeAgent.run()` | 允许用户通过传入分析器列表，动态组合和执行工作流。 |
| | **统一输出管理** | `已实现` | `AutoForgeAgent` | 将所有分析器的结果统一保存到指定的输出目录，并生成结构化报告。 |
| | **Web UI** | `待开发` | `webui/app.py` | 提供一个图形化界面，用于交互式地配置和运行任务，并可视化结果。 |
| **需求工程 (Requirement Engineering)** | **多模态文档解析** | `已实现` | `MultiModalDocParser` | 解析PDF, DOCX, MD, TXT等格式的文档，提取纯文本。 |
| | **图片内容理解** | `已实现` | `BaiLianClient` | 当使用支持多模态的LLM时，可以解析文档中的图片内容（如图表、架构图）。 |
| | **需求分析与任务拆解** | `已实现` | `RequirementAnalyzer` | 利用LLM分析需求，定义核心任务、技术约束和评估指标。 |
| **技术选型 (Tech Selection)** | **HuggingFace模型搜索** | `已实现` | `ModelSearcher` | 根据需求分析结果，在HuggingFace上搜索和推荐模型。 |
| | **HF模型信息爬取** | `已实现` | `HuggingFaceCrawler` | 实时爬取HuggingFace的模型信息，确保`ModelSearcher`的数据时效性。 |
| | **PapersWithCode论文搜索** | `已实现` | `PapersWithCodeCrawler` | 根据关键词在PwC上搜索论文，并提取元数据和代码库链接。支持多种搜索策略，避免重定向问题。 |
| | **论文PDF下载** | `已实现` | `PaperDownloader` | 从ArXiv等来源下载论文的PDF原文，为内容分析做准备。支持多种下载源和格式。 |
| | **论文内容分析** | `已实现` | `PaperAnalyzer` | 利用LLM深入分析论文PDF，提取方法、创新点、实验结果等关键信息。已完成端到端测试。 |
| | **GitHub代码库分析** | `已实现` | `GitHubRepoAnalyzer` | 克隆并分析代码库，提取语言、依赖、文件结构等信息。支持多种编程语言识别。 |
| | **论文代码联合分析** | `已实现` | `PaperCodeAnalyzer` | 结合论文和代码进行综合分析，评估代码实现与论文描述的一致性。已完成功能验证。 |
| **方案设计 (Solution Design)** | **数据集方案设计** | `已实现` | `DatasetDesigner` | 根据需求分析，为模型训练和评估设计数据集的构建、划分和标注方案。 |
| | **实验方案设计** | `已实现` | `ExperimentDesigner` | 为选定的模型设计超参数调优的网格搜索实验方案。 |
| **结果评估 (Result Evaluation)** | **实验结果分析** | `已实现` | `ResultAnalyzer` | （理论阶段）根据用户提供的实验报告，分析各模型表现，给出最终选型建议。 |
| | **自动模型评估** | `待开发` | `ModelEvaluator` | **[核心]** 基于设计好的数据集和实验方案，自动执行模型评估流程，并生成标准化的评估报告。 |
| **基础设施 (Infrastructure)** | **多LLM客户端支持** | `已实现` | `llm/` | 已支持OpenAI, DeepSeek, 阿里云百炼。易于扩展。 |
| | **提示词管理** | `已实现` | `prompts/` | 支持从文件加载和动态渲染提示词模板。 |

---

## 4. 产品路线图 (Roadmap)

### **v0.2: 端到端模型评估闭环** (近期目标)
- **目标**: 打通从`方案设计`到`结果分析`的自动化流程。
- **核心功能**:
    - **`ModelEvaluator` (模型评估器) 的开发**:
        - 实现与HuggingFace `transformers` 和 `datasets` 库的深度集成。
        - 根据`ExperimentDesigner`的方案，自动下载模型和数据集。
        - 执行评估/微调脚本，捕获日志和性能指标（如Accuracy, F1-score）。
        - 将评估结果结构化，作为`ResultAnalyzer`的输入。
    - **增强 `ResultAnalyzer`**: 使其能够直接消费`ModelEvaluator`的输出，完成全自动分析。

### **v0.3: 交互式Web界面与体验优化**
- **目标**: 降低使用门槛，提供更直观的交互和结果展示。
- **核心功能**:
    - **开发Web UI**: 基于`Gradio`或`Streamlit`，实现一个MVP版本的Web界面。
    - **任务管理**: 支持在UI上创建、监控和管理分析任务。
    - **可视化报告**: 将Markdown报告转换为可交互的图表和表格。

### **v0.4: 软件工程能力扩展**
- **目标**: 将应用领域从机器学习扩展到更广泛的软件工程。
- **核心功能**:
    - **`CodeGenerator` (代码生成器)**: 基于需求分析和架构设计，生成项目骨架和核心模块代码。
    - **`TestGenerator` (测试生成器)**: 为已有代码生成单元测试或集成测试。
    - **`TechDocumenter` (技术文档生成器)**: 自动为项目生成README或API文档。

### **v0.5 -> v1.0: 自主智能体与多智能体协作** (长期愿景)
- **目标**: 实现更高阶的自主决策和复杂任务处理能力。
- **核心功能**:
    - **引入记忆机制**: 为Agent提供长期记忆能力，使其可以从历史任务中学习。
    - **规划与反思能力**: 允许Agent自主规划任务步骤，并在遇到问题时进行反思和调整。
    - **多智能体协作框架**: 设计一个允许多个专职Agent（如"需求分析Agent"、"编码Agent"、"测试Agent"）协同工作的框架。

---

## 5. 非功能性需求

- **可配置性**: 核心参数（如LLM配置、输出路径、爬虫参数）应易于通过配置文件或环境变量进行修改。
- **可扩展性**: 添加新的`Analyzer`或`Tool`应该足够简单，只需继承基类并实现核心方法。
- **性能**: 对于耗时操作（如爬虫、模型下载），应提供异步执行和缓存机制。
- **健壮性**: 对第三方API和外部依赖有合理的错误处理和重试机制。
