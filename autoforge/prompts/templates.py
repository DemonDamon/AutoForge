"""
提示词模板集合
"""

class PromptTemplates:
    """提示词模板"""
    
    # 文档理解提示词
    DOCUMENT_UNDERSTANDING = """你是一个专业的需求分析师和AI算法专家。请仔细分析以下文档内容，理解其中的核心需求。

## 文档内容
{document_content}

## 任务要求
请完成以下分析任务：

1. **需求概述**
   - 用1-2段话简洁描述文档的核心需求
   - 明确项目的目标和预期成果

2. **算法任务分解**
   识别并列出所有涉及的AI/ML算法任务，对每个任务说明：
   - 任务名称
   - 输入描述（数据类型、格式、示例）
   - 输出描述（数据类型、格式、示例）
   - 任务类型（分类/回归/生成/检测等）
   - 预估难度（简单/中等/困难）

3. **评估指标定义**
   为每个算法任务定义评估指标：
   
   a) 效果指标：
      - 指标名称
      - 选择理由
      - 计算公式
      - 期望阈值（如果文档中有提及）
   
   b) 性能指标：
      - 推理时间要求
      - 吞吐量要求
      - 资源占用限制
      - 其他性能约束

4. **数据需求分析**
   - 训练数据规模估计
   - 数据采集难度评估
   - 数据标注需求说明

5. **技术约束和限制**
   - 部署环境要求
   - 实时性要求
   - 精度要求
   - 其他特殊要求

请以结构化的Markdown格式输出分析结果。
"""
    
    # 模型搜索提示词
    MODEL_SEARCH = """你是一个HuggingFace模型专家。基于以下需求分析结果，请搜索并推荐最合适的模型。

## 需求分析
{requirement_analysis}

## 任务要求
请完成以下任务：

1. **模型搜索策略**
   - 根据算法任务确定搜索关键词
   - 确定模型筛选条件（任务类型、语言支持等）

2. **候选模型推荐**
   推荐1-3个模型方案，每个方案包括：
   
   a) 如果是单模型方案：
      - 模型名称和HuggingFace链接
      - 模型介绍（功能、特点）
      - 性能指标（准确率、速度等）
      - 模型大小和资源需求
      - 下载量和社区评价
      - 优缺点分析
   
   b) 如果是多模型组合方案：
      - Pipeline架构说明
      - 各组件模型信息（同上）
      - 组件间的数据流转说明
      - 整体方案的优缺点

3. **方案对比分析**
   - 效果对比
   - 性能对比
   - 实施难度对比
   - 维护成本对比

4. **推荐理由总结**
   说明为什么这些模型/方案最适合当前需求

请以结构化的Markdown格式输出分析结果。
"""
    
    # 数据集构建提示词
    DATASET_CONSTRUCTION = """你是一个机器学习数据集构建专家。基于需求分析和模型选择结果，请设计数据集构建方案。

## 需求分析
{requirement_analysis}

## 选定模型方案
{selected_models}

## 任务要求
请设计详细的数据集构建方案：

1. **数据集规模设计**
   - 训练集大小建议
   - 验证集大小建议
   - 测试集大小建议
   - 数据分布要求

2. **数据收集方案**
   提供多种可选的数据收集途径：
   
   a) 开源数据集
      - 推荐的数据集名称和链接
      - 数据集特点和规模
      - 使用方法和注意事项
   
   b) 网络数据爬取
      - 数据源推荐
      - 爬取策略
      - 数据清洗要点
      - 法律合规提醒
   
   c) 大模型生成
      - 生成策略
      - Prompt模板设计
      - 质量控制方法
      - 多样性保证措施
   
   d) 数据增强
      - 增强方法推荐
      - 增强比例建议
      - 质量验证方法

3. **数据标注方案**
   
   a) 人工标注方案
      - 标注规范定义
      - 标注界面设计（如Excel表格）
        * 表头设计
        * 字段说明
        * 示例数据
      - 标注批次规划
        * 第一批：规模、目的
        * 第二批：规模、目的
        * 后续批次规划
      - 质量控制措施
   
   b) 自动标注方案（如使用大模型）
      - 标注模型选择
      - 标注Prompt设计
      - 标注流程说明
      - 人工复核比例

4. **数据集组织结构**
   ```
   dataset/
   ├── train/
   │   ├── data.json
   │   └── metadata.json
   ├── val/
   │   ├── data.json
   │   └── metadata.json
   ├── test/
   │   ├── data.json
   │   └── metadata.json
   └── README.md
   ```
   
   说明各文件的格式和内容要求

5. **数据集质量保证**
   - 数据平衡性检查
   - 标注一致性检查
   - 数据泄露预防
   - 质量指标定义

请以结构化的Markdown格式输出完整方案。
"""
    
    # 网格化实验设计提示词
    GRID_EXPERIMENT_DESIGN = """你是一个机器学习实验设计专家。请基于选定的模型方案设计网格化实验。

## 模型方案
{model_solution}

## 数据集信息
{dataset_info}

## 任务要求
请设计详细的网格化实验方案：

1. **超参数网格设计**
   
   a) 对于端到端模型：
      - 学习率范围：[最小值, ..., 最大值]
      - 批次大小：[选项列表]
      - 训练轮数：[选项列表]
      - 优化器选择：[Adam, SGD, ...]
      - 学习率调度策略
      - 正则化参数
      - 模型特定参数（如层数、隐藏单元数等）
   
   b) 对于Pipeline方案：
      - 各组件模型的独立参数
      - 组件间的接口参数
      - Pipeline整体优化策略

2. **实验执行计划**
   - 实验优先级排序
   - 资源分配建议
   - 并行实验数量
   - 预计总耗时

3. **早停策略**
   - 早停条件定义
   - 资源上限设置
   - 实验中止条件

4. **实验监控指标**
   - 训练过程监控
   - 验证集表现
   - 资源使用情况
   - 异常检测

5. **实验报告模板**
   ```json
   {
     "experiment_id": "exp_001",
     "model_name": "model_name",
     "hyperparameters": {
       "learning_rate": 0.001,
       "batch_size": 32,
       ...
     },
     "training_metrics": {
       "train_loss": [],
       "val_loss": [],
       "train_accuracy": [],
       "val_accuracy": []
     },
     "final_results": {
       "test_accuracy": 0.95,
       "inference_time": 0.1,
       ...
     },
     "resource_usage": {
       "gpu_memory": "8GB",
       "training_time": "2h",
       ...
     },
     "notes": "any special observations"
   }
   ```

6. **结果分析计划**
   - 最优参数识别方法
   - 性能瓶颈分析
   - 改进方向建议

请以结构化的Markdown格式输出完整方案。
"""
    
    # 实验结果分析提示词
    EXPERIMENT_ANALYSIS = """你是一个机器学习实验分析专家。请分析以下实验结果并给出最终建议。

## 实验报告汇总
{experiment_reports}

## 硬件环境
{hardware_info}

## 任务要求
请完成以下分析任务：

1. **效果分析**
   - 各模型/配置的准确率对比
   - 最优配置识别
   - 效果稳定性分析
   - 是否达到预期指标

2. **性能分析**
   
   a) 推理性能
      - 单次推理耗时
      - 批量推理吞吐量
      - 内存占用
      - GPU使用率
   
   b) 对于文本生成模型额外分析：
      - 首Token响应时间
      - 平均输入Token处理速度
      - 平均输出Token生成速度
      - 流式输出延迟

3. **资源成本分析**
   - 训练成本（时间、算力）
   - 部署成本估算
   - 运维成本预估

4. **方案推荐**
   
   a) 主方案
      - 模型选择
      - 最优超参数配置
      - 部署建议
      - 优势说明
   
   b) 备选方案
      - 适用场景
      - 与主方案的权衡
      - 切换条件

5. **风险提示**
   - 技术风险
   - 性能风险
   - 扩展性风险
   - 维护风险

6. **优化建议**
   - 短期优化方向
   - 长期改进计划
   - 数据增强建议
   - 模型升级路径

7. **部署检查清单**
   - [ ] 模型文件准备
   - [ ] 环境依赖确认
   - [ ] 性能基准测试
   - [ ] 监控指标设置
   - [ ] 回滚方案准备

请以结构化的Markdown格式输出分析报告，便于向客户展示。
"""
    
    # 多模态文档理解提示词（用于图片分析）
    MULTIMODAL_UNDERSTANDING = """请分析这张图片中的内容，提取所有重要信息。

重点关注：
1. 文字内容（如果有）
2. 图表数据（如果有）
3. 流程图或架构图（如果有）
4. 关键视觉元素
5. 图片传达的主要信息

请以Markdown格式组织输出内容，使其易于理解和后续处理。
""" 